{% extends 'pages/base.html' %}

{% load staticfiles %}

{% block title %}Welcome to Research Engine{% endblock %}

{% block navbar %}
    {% include 'objects/navbar.html' %}
{% endblock %}

{% block head %}
<script src='{{ STATIC_URL }}js/ajax_submit.js'></script>

{% endblock %}

{% if error %}

{% else %}

{% block content %}

{% if page == 'se_informal' %}
    <style>
        body, h4 {
            font-family: 'Comic Sans MS';
            background-color: #f39c12;
        }
    </style>
    <script type='text/javascript'>
        window.setInterval(function() {
            $('.gs-title').css('font-family', 'Comic Sans MS');
            $('.gs-snippet').css('font-family', 'Comic Sans MS');
            $('.gsc-url-bottom').css('font-family', 'Comic Sans MS');
            $('.gsc-cursor-page').css('font-family', 'Comic Sans MS');
            $('.gsc-control-cse').css('background-color', '#f39c12');
            $('#results').css('background-color', '#f39c12');
            $('#___gsce_0').css('background-color', '#f39c12');
        }, 1);
    </script>
{% else %}
    <style>
    * {
      -webkit-border-radius: 0 !important;
         -moz-border-radius: 0 !important;
              border-radius: 0 !important;
    }
    .modal-dialog
    {
      width: 800px;/* your width */
    }
    </style>
    <script type='text/javascript'>
    window.setInterval(function() {
        $('.gsc-control-cse').css('background-color', '#CEECF5');
            $('#results').css('background-color', '#CEECF5');
            $('#___gsce_0').css('background-color', '#CEECF5');
            $('#gsc-resultbox-visible').css('background-color', '#CEECF5');
        }, 1);
    </script>
{% endif %}
    <div class='row'>
        <img src='{{ STATIC_URL }}logo.png' style='width: 400;'/>
    </div>
    <div class='row'>
        <div class='col-md-9' style='background-color:#CEECF5;'>
            <form class='form' id='answer_form' method='POST' enctype="multipart/form-data" style='width:800px; padding:20px;' class='text-left' onkeypress="return event.keyCode != 13;" action='/submit_answer'>{%csrf_token%}
                <div class='form-group'>
                <h5>Find an answer to the question below by entering search terms into the search box below and hitting the 'Search' button. When you have found an answer, type it directly into the box below the question and hit the 'Submit Your Answer' button.</h5>
                <h4>{{ text }}</h4>
                </div>
                <div class='input-group' style='width:500px;'>
                    <input type='text' id='answer' name='answer' class='form-control' placeholder='Your answer' autocomplete="off"/><span class="input-group-btn"><input type='submit' class='btn btn-default' value='Submit Your Answer' /></span>
                </div>
                <input type="hidden" placeholder='Your answer' value='{{ question.id }}' id='questionid' name='questionid' />
            </form>
        </div>
        <div class='col-md-3'>
        </div>
    </div>
    <hr>
    <div class='row'>
        <div class='col-md-9' style='background-color:#CEECF5;'>
            <h4>Answer the question using the search engine below</h4>
            <br>
            <form onsubmit="return executeQuery();" id="cse-search-box-form-id" class='form-inline' style='width:800px; padding:20px;' class='text-left'>
                <div class='input-group' style='width:500px;'>
                    <input type="text" class='form-control' placeholder='Search' id="cse-search-input-box-id" onkeypress="return event.keyCode != 13;" size="25" autocomplete="off"/><span class="input-group-btn"><a href="#" onclick="submit_query();return executeQuery();" class='btn btn-primary'><span class="glyphicon glyphicon-search"></span> Search</a></span>
                </div>
            </form>
            <div class="row" id="results" style='background-color:#CEECF5;'>
                <gcse:searchresults-only></gcse:searchresults-only>
            </div>
        </div>
        <div class='col-md-3' id='condition'>
            {% if page == 'se_anthropomorphic' %}
                <script language="JavaScript" type="text/javascript" src="http://vhss-d.oddcast.com/vhost_embed_functions_v2.php?acc=4170425&js=1"></script><script language="JavaScript" type="text/javascript">AC_VHost_Embed(4170425,300,400,'',1,1, 2347563, 0,1,0,'dfdb49e086948c5e42ec6322413625cb',9);</script>
            {% endif %}
            {% if page == 'se_ip' %}
                <p>Your IP address is {{ client_address }}</p>
            {% endif %}
            {% if page == 'se_tracking' %}
                <p>Click history:</p>
                <script>
                    $(document).ready(function() {
                        $('#results').on('click', 'a', function (event) {
                            result_text = $(this).text();
                            result_href = $(this).attr('href');
                            submit_search(result_text, result_href);
                            document.getElementById('condition').innerHTML += '<br><h5>' + $(this).text() + '</h5>';
                        });
                    });
                </script>
            {% else %}
                <script>
                    $(document).ready(function() {
                        $('#results').on('click', 'a', function (event) {
                            result_text = $(this).text();
                            result_href = $(this).attr('href');
                            submit_search(result_text, result_href);
                        });
                    });
                </script>
            {% endif %}
            {% if page == 'se_static' %}
                <img src='{{ STATIC_URL }}avatar.png' />
                <br>
                <br>
                <p><h4>What would you like to search for?</h4></p>
            {% endif %}
            {% include 'objects/footer.html' %}
        </div>
    </div>
{% endblock %}

{% endif %}

{% block footer %}

{% endblock %}